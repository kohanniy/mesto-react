{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","utils/utils.js","components/ImagePopup.js","utils/api.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ConfirmDeletionPopup.js","components/App.js","index.js"],"names":["Header","className","src","logo","alt","CurrentUserContext","React","createContext","Card","cardData","onCardClick","onCardLike","onConfirmDeletionPopupOpen","currentUser","useContext","isOwn","owner","_id","isLiked","likes","some","like","cardDeleteButtonClassName","cardLikeButtonClassName","onClick","link","name","type","aria-label","length","Main","props","onEditAvatar","onEditProfile","onAddCard","cards","avatar","about","map","card","toString","Footer","Date","getFullYear","rejectPromise","err","console","log","handleStopPropagation","e","stopPropagation","ImagePopup","onClose","api","url","token","groupId","this","_url","_token","_groupId","res","ok","json","Promise","reject","status","fetch","method","headers","authorization","then","_parseResponseFromServer","all","getInitialCards","getUserInfo","data","body","JSON","stringify","id","EditProfilePopup","isOpen","onUpdateUser","isLoading","useState","setName","description","setDescription","useEffect","onSubmit","preventDefault","noValidate","onChange","target","value","placeholder","minLength","maxLength","required","EditAvatarPopup","onUpdateAvatar","setAvatar","inputAvatarRef","useRef","current","ref","AddPlacePopup","onAddPlace","setLink","ConfirmDeletionPopup","cardDelete","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddCardPopupOpen","setIsAddCardPopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isConfirmDeletionPopup","setIsConfirmDeletionPopup","selectedCard","setSelectedCard","setCurrentUser","setCards","setIsLoading","closeAllPopups","handlePopupsEscClose","key","document","addEventListener","removeEventListener","getDataForRendered","cardsData","userData","catch","Provider","changeLikeCardStatus","newCard","newCards","c","setUserInfo","newUserData","finally","addCard","deleteCard","filter","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.58a2a6fe.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.2e17206c.svg\";","import logo from '../images/logo.svg';\r\n\r\nfunction Header() {\r\n  return (\r\n    <header className=\"header\">\r\n      <img src={logo} alt=\"Логотип\" className=\"header__logo\" />\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","import React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Card({ cardData, onCardClick, onCardLike, onConfirmDeletionPopupOpen }) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  const isOwn = cardData.owner._id === currentUser._id;\r\n  const isLiked = cardData.likes.some(like => like._id === currentUser._id)\r\n\r\n  const cardDeleteButtonClassName = (`cards__delete-btn ${isOwn ? 'cards__delete-btn_visible' : 'cards__delete-btn_hidden'}`);\r\n  const cardLikeButtonClassName = (`cards__heart ${isLiked && 'cards__heart_active'}`);\r\n\r\n  function handleClick() {\r\n    onCardClick(cardData);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    onCardLike(cardData);\r\n  }\r\n\r\n  function handleDeleteIconClick() {\r\n    onConfirmDeletionPopupOpen(cardData);\r\n  }\r\n\r\n  return (\r\n    <li className=\"cards__item\">\r\n      <img\r\n        onClick={handleClick}\r\n        className=\"cards__image\"\r\n        src={cardData.link}\r\n        alt={cardData.name}\r\n      />\r\n      <button\r\n        onClick={handleDeleteIconClick}\r\n        type=\"button\"\r\n        aria-label=\"Удалить\"\r\n        className={cardDeleteButtonClassName}\r\n      />\r\n      <div className=\"cards__rating\">\r\n        <h2 className=\"cards__title\">{cardData.name}</h2>\r\n        <div className=\"cards__heart-container\">\r\n          <button\r\n            onClick={handleLikeClick}\r\n            type=\"button\"\r\n            aria-label=\"Поставить лайк\"\r\n            className={cardLikeButtonClassName}\r\n          />\r\n          <p className=\"cards__hearts-number\">{cardData.likes.length}</p>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default Card;\r\n","import React from 'react';\r\nimport Card from './Card';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\r\n\r\nfunction Main(props) {\r\n  const { onEditAvatar, onEditProfile, onAddCard, onCardClick, cards, onCardLike, onConfirmDeletionPopupOpen } = props;\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"main-content\">\r\n      <section className=\"profile\">\r\n        <div className=\"profile__img-container\">\r\n          <img\r\n            className=\"profile__img\"\r\n            src={currentUser.avatar}\r\n            alt=\"аватар пользователя\"\r\n          />\r\n          <button\r\n            onClick={onEditAvatar}\r\n            className=\"profile__avatar-btn\"\r\n            type=\"button\"\r\n            aria-label=\"Редактировать аватар\"\r\n          />\r\n        </div>\r\n        <div className=\"profile__data\">\r\n          <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n          <p className=\"profile__description\">{currentUser.about}</p>\r\n          <button\r\n            onClick={onEditProfile}\r\n            type=\"button\"\r\n            aria-label=\"Изменить информацию о себе\"\r\n            className=\"profile__edit-btn\"\r\n          />\r\n        </div>\r\n        <button\r\n          onClick={onAddCard}\r\n          type=\"button\"\r\n          aria-label=\"Добавить фото\"\r\n          className=\"profile__add-btn\"\r\n        />\r\n      </section>\r\n      <section className=\"cards\">\r\n        <ul className=\"cards__list\">\r\n          {cards.map(card =>\r\n            <Card\r\n              onConfirmDeletionPopupOpen={onConfirmDeletionPopupOpen}\r\n              onCardLike={onCardLike}\r\n              onCardClick={onCardClick}\r\n              key={card._id.toString()}\r\n              cardData={card}\r\n            />\r\n          )}\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React from 'react';\r\n\r\nfunction Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">&copy; {new Date().getFullYear()} Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","//Обработка ошибок, попадающих в catch\r\nexport function rejectPromise(err) {\r\n  console.log(err);\r\n}\r\n\r\n// Прекращение передачи текущего события\r\nexport function handleStopPropagation(e) {\r\n  e.stopPropagation();\r\n}\r\n","import { handleStopPropagation } from '../utils/utils';\r\n\r\nfunction ImagePopup({ card, onClose}) {\r\n  return (\r\n      <div\r\n        onClick={onClose}\r\n        className={`popup ${card ? 'popup_opened' : 'popup_closed'}`}\r\n      >\r\n        <div onClick={handleStopPropagation} className=\"popup__container\">\r\n          <figure className=\"popup__pic-wrap\">\r\n            <img alt={card.name} src={card.link} className=\"popup__pic\" />\r\n            <figcaption className=\"popup__pic-caption\">{card.name}</figcaption>\r\n          </figure>\r\n          <button\r\n            onClick={onClose}\r\n            type=\"button\"\r\n            aria-label=\"Закрыть\"\r\n            className=\"popup__close-btn\"\r\n          />\r\n        </div>\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;\r\n","class Api {\r\n  constructor({ url, token, groupId }) {\r\n    this._url = url;\r\n    this._token = token;\r\n    this._groupId = groupId;\r\n  }\r\n\r\n  _parseResponseFromServer(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  }\r\n\r\n  getInitialCards() {\r\n    return fetch(`${this._url}/${this._groupId}/cards`, {\r\n      method: 'GET',\r\n      headers: {\r\n        authorization: this._token\r\n      }\r\n    })\r\n    .then(this._parseResponseFromServer)\r\n  }\r\n\r\n  getUserInfo() {\r\n    return fetch(`${this._url}/${this._groupId}/users/me`, {\r\n      method: 'GET',\r\n      headers: {\r\n        authorization: this._token\r\n      }\r\n    })\r\n    .then(this._parseResponseFromServer)\r\n  }\r\n\r\n  getDataForRendered() {\r\n    return Promise.all([ this.getInitialCards(), this.getUserInfo() ])\r\n  }\r\n\r\n  addCard(data) {\r\n    return fetch(`${this._url}/${this._groupId}/cards`, {\r\n      method: 'POST',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n    .then(this._parseResponseFromServer)\r\n  }\r\n\r\n  setUserInfo(data) {\r\n    return fetch(`${this._url}/${this._groupId}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n    .then(this._parseResponseFromServer)\r\n  }\r\n\r\n  setAvatar(data) {\r\n    return fetch(`${this._url}/${this._groupId}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n    .then(this._parseResponseFromServer)\r\n  }\r\n\r\n  deleteCard(id) {\r\n    return fetch(`${this._url}/${this._groupId}/cards/${id}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        authorization: this._token\r\n      }\r\n    })\r\n    .then(this._parseResponseFromServer)\r\n  }\r\n\r\n  changeLikeCardStatus(id, like) {\r\n    return fetch(`${this._url}/${this._groupId}/cards/likes/${id}`, {\r\n      method: like ? 'PUT' : 'DELETE',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n    .then(this._parseResponseFromServer)\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  url: `https://mesto.nomoreparties.co/v1`,\r\n  token: `1282f84b-7da3-48cb-b9e7-a66ba2d4bc54`,\r\n  groupId: `cohort-16`\r\n});\r\n\r\nexport default api;\r\n","import React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport { handleStopPropagation } from '../utils/utils';\r\n\r\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser, isLoading }) {\r\n  const [ name, setName] = React.useState('');\r\n  const [ description, setDescription ] = React.useState('');\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser]);\r\n\r\n  function handleNameInputChange(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleAboutInputChange(e) {\r\n    setDescription(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateUser({\r\n      name,\r\n      about: description\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div\r\n     onClick={onClose}\r\n     className={`popup ${isOpen ? 'popup_opened' : 'popup_closed'}`}\r\n    >\r\n      <form\r\n        onClick={handleStopPropagation}\r\n        onSubmit={handleSubmit}\r\n        name=\"edit-profile\"\r\n        className=\"popup__form\"\r\n        noValidate\r\n      >\r\n        <h3 className=\"popup__heading\">Редактировать профиль</h3>\r\n        <input\r\n          onChange={handleNameInputChange}\r\n          value={name || ''}\r\n          id=\"username-input\"\r\n          type=\"text\"\r\n          name=\"name\"\r\n          className=\"popup__input username\"\r\n          placeholder=\"Валентин Петров\"\r\n          minLength=\"2\" maxLength=\"40\" required\r\n        />\r\n        <span id=\"username-input-error\" className=\"popup__input-error\" />\r\n        <input\r\n          onChange={handleAboutInputChange}\r\n          value={description || ''}\r\n          id=\"activity-input\"\r\n          type=\"text\"\r\n          name=\"about\"\r\n          className=\"popup__input activity\"\r\n          placeholder=\"Род занятий. Например, программист\"\r\n          minLength=\"2\" maxLength=\"200\" required\r\n        />\r\n        <span id=\"activity-input-error\" className=\"popup__input-error\" />\r\n        <button type=\"submit\" className=\"popup__button\">\r\n          {isLoading ? 'Сохранение...' : 'Сохранить'}\r\n        </button>\r\n        <button\r\n          onClick={onClose}\r\n          type=\"button\"\r\n          aria-label=\"Закрыть\"\r\n          className=\"popup__close-btn\"\r\n        />\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;\r\n","import React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport { handleStopPropagation } from '../utils/utils';\r\n\r\nfunction EditAvatarPopup({ isOpen, onUpdateAvatar, onClose, isLoading }) {\r\n  const [ avatar, setAvatar ] = React.useState('');\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const inputAvatarRef = React.useRef();\r\n\r\n  React.useEffect(() => {\r\n    setAvatar(currentUser.avatar);\r\n  }, [currentUser]);\r\n\r\n  function handleAvatarInputChange(e) {\r\n    setAvatar(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateAvatar({\r\n      avatar: inputAvatarRef.current.value\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div\r\n      onClick={onClose}\r\n      className={`popup ${isOpen ? 'popup_opened' : 'popup_closed'}`}\r\n    >\r\n      <form\r\n        onClick={handleStopPropagation}\r\n        onSubmit={handleSubmit}\r\n        name=\"edit-avatar\"\r\n        className=\"popup__form\"\r\n        noValidate\r\n      >\r\n        <h3 className=\"popup__heading\">Обновить аватар</h3>\r\n        <input\r\n          id=\"avatar-link-input\"\r\n          type=\"url\"\r\n          name=\"avatar\"\r\n          className=\"popup__input avatar-link\"\r\n          ref={inputAvatarRef}\r\n          placeholder=\"Ссылка на аватар\"\r\n          onChange={handleAvatarInputChange}\r\n          value={avatar || ''}\r\n          required\r\n        />\r\n        <span id=\"avatar-link-input-error\" className=\"popup__input-error\" />\r\n        <button type=\"submit\" className=\"popup__button\">\r\n          {isLoading ? 'Сохранение...' : 'Сохранить'}\r\n        </button>\r\n        <button\r\n          onClick={onClose}\r\n          type=\"button\"\r\n          aria-label=\"Закрыть\"\r\n          className=\"popup__close-btn\"\r\n        />\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import React from 'react';\r\nimport { handleStopPropagation } from '../utils/utils';\r\n\r\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace, isLoading }) {\r\n  const [ name, setName ] = React.useState('');\r\n  const [ link, setLink ] = React.useState('');\r\n\r\n  function handlePlaceNameInputChange(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handlePlaceLinkInputChange(e) {\r\n    setLink(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onAddPlace({ name, link });\r\n  }\r\n\r\n  return (\r\n    <div\r\n      onClick={onClose}\r\n      className={`popup ${isOpen ? 'popup_opened' : 'popup_closed'}`}\r\n    >\r\n      <form\r\n        onClick={handleStopPropagation}\r\n        onSubmit={handleSubmit}\r\n        name=\"add-card\"\r\n        className=\"popup__form\"\r\n        noValidate\r\n      >\r\n        <h3 className=\"popup__heading\">Новое место</h3>\r\n        <input\r\n          onChange={handlePlaceNameInputChange}\r\n          id=\"place-name-input\"\r\n          type=\"text\"\r\n          name=\"place-name\"\r\n          className=\"popup__input\"\r\n          placeholder=\"Название\"\r\n          minLength=\"1\"\r\n          maxLength=\"30\"\r\n          required\r\n        />\r\n        <span id=\"place-name-input-error\" className=\"popup__input-error\" />\r\n        <input\r\n          onChange={handlePlaceLinkInputChange}\r\n          id=\"picture-link-input\"\r\n          type=\"url\"\r\n          name=\"link\"\r\n          className=\"popup__input\"\r\n          placeholder=\"Ссылка на картинку\"\r\n          required\r\n        />\r\n        <span id=\"picture-link-input-error\" className=\"popup__input-error\" />\r\n        <button type=\"submit\" className=\"popup__button\">\r\n          {isLoading ? 'Сохранение...' : 'Создать'}\r\n        </button>\r\n        <button\r\n          onClick={onClose}\r\n          type=\"button\"\r\n          aria-label=\"Закрыть\"\r\n          className=\"popup__close-btn\"\r\n        />\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","import React from 'react';\r\nimport { handleStopPropagation } from '../utils/utils';\r\n\r\nfunction ConfirmDeletionPopup({ isOpen, onClose, cardDelete, isLoading }) {\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    cardDelete(isOpen);\r\n  }\r\n\r\n  return (\r\n    <div\r\n      onClick={onClose}\r\n      className={`popup ${isOpen ? 'popup_opened' : 'popup_closed'}`}\r\n    >\r\n      <form\r\n        onClick={handleStopPropagation}\r\n        onSubmit={(handleSubmit)}\r\n        name=\"confirm-deletion\"\r\n        className=\"popup__form\"\r\n        noValidate\r\n      >\r\n        <h3 className=\"popup__heading\">Вы уверены?</h3>\r\n        <button type=\"submit\" className=\"popup__button\">\r\n          {isLoading ? 'Удаление...' : 'Да'}\r\n        </button>\r\n        <button\r\n          onClick={onClose}\r\n          type=\"button\"\r\n          aria-label=\"Закрыть\"\r\n          className=\"popup__close-btn\"\r\n        />\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ConfirmDeletionPopup;\r\n","import React from 'react';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\nimport ImagePopup from './ImagePopup';\r\nimport {rejectPromise} from '../utils/utils';\r\nimport api from '../utils/api';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport ConfirmDeletionPopup from './ConfirmDeletionPopup';\r\n\r\nfunction App() {\r\n  const [ isEditProfilePopupOpen, setIsEditProfilePopupOpen ] = React.useState(false);\r\n  const [ isAddCardPopupOpen, setIsAddCardPopupOpen ] = React.useState(false);\r\n  const [ isEditAvatarPopupOpen, setIsEditAvatarPopupOpen ] = React.useState(false);\r\n  const [ isConfirmDeletionPopup, setIsConfirmDeletionPopup ] = React.useState(false);\r\n  const [ selectedCard, setSelectedCard ] = React.useState(false);\r\n  const [ currentUser, setCurrentUser ] = React.useState('');\r\n  const [ cards, setCards ] = React.useState([]);\r\n  const [ isLoading, setIsLoading ] = React.useState(false);\r\n\r\n  function handleCardClick(cardData) {\r\n    setSelectedCard(cardData);\r\n  }\r\n\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(!isEditAvatarPopupOpen);\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(!isEditProfilePopupOpen);\r\n  }\r\n\r\n  function handleAddCardClick() {\r\n    setIsAddCardPopupOpen(!isAddCardPopupOpen);\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddCardPopupOpen(false);\r\n    setSelectedCard(false);\r\n    setIsConfirmDeletionPopup(false);\r\n  }\r\n\r\n  function handleUpdateUser({name, about}) {\r\n    setIsLoading(!isLoading);\r\n    api.setUserInfo({name, about})\r\n      .then((newUserData) => {\r\n        setCurrentUser(newUserData);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        rejectPromise(err);\r\n      })\r\n      .finally(() => {\r\n        setIsLoading(false);\r\n      })\r\n  }\r\n\r\n  function handleUpdateAvatar({ avatar }) {\r\n    setIsLoading(!isLoading);\r\n    api.setAvatar({avatar})\r\n      .then((data) => {\r\n        setCurrentUser(data);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        rejectPromise(err);\r\n      })\r\n      .finally(() => {\r\n        setIsLoading(false);\r\n      })\r\n  }\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(like => like._id === currentUser._id);\r\n    api.changeLikeCardStatus(card._id, !isLiked)\r\n      .then((newCard) => {\r\n        const newCards = cards.map((c) => c._id === card._id ? newCard : c);\r\n        setCards(newCards);\r\n      })\r\n  }\r\n\r\n  function confirmDeletionPopupOpen(cardData) {\r\n    setIsConfirmDeletionPopup(cardData);\r\n  }\r\n\r\n  function handleCardDelete(card) {\r\n    setIsLoading(!isLoading);\r\n    api.deleteCard(card._id)\r\n      .then(() => {\r\n        const newCards = cards.filter((c) => c._id !== card._id);\r\n        setCards(newCards);\r\n        setIsConfirmDeletionPopup(false);\r\n      })\r\n      .catch((err) => {\r\n        rejectPromise(err);\r\n      })\r\n      .finally(() => {\r\n        setIsLoading(false);\r\n      })\r\n  }\r\n\r\n  function handleAddPlaceSubmit({name, link}) {\r\n    setIsLoading(!isLoading);\r\n    api.addCard({name, link})\r\n      .then((newCard) => {\r\n        setCards([newCard, ...cards]);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        rejectPromise(err);\r\n      })\r\n      .finally(() => {\r\n        setIsLoading(false);\r\n      })\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    function handlePopupsEscClose(e) {\r\n      if (e.key === 'Escape') {\r\n        closeAllPopups();\r\n      }\r\n    }\r\n    if (isEditProfilePopupOpen || isAddCardPopupOpen || isEditAvatarPopupOpen || selectedCard || isConfirmDeletionPopup) {\r\n      document.addEventListener('keydown', handlePopupsEscClose);\r\n    }\r\n    return () => document.removeEventListener('keydown', handlePopupsEscClose);\r\n  }, [isEditProfilePopupOpen, isAddCardPopupOpen, isEditAvatarPopupOpen, selectedCard, isConfirmDeletionPopup]);\r\n\r\n  React.useEffect(() => {\r\n    api.getDataForRendered()\r\n      .then((data) => {\r\n        const [ cardsData, userData ] = data;\r\n        setCards(cardsData);\r\n        setCurrentUser(userData);\r\n      })\r\n      .catch((err) => {\r\n        rejectPromise(err);\r\n      })\r\n  }, []);\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <Header />\r\n      <Main\r\n        onEditAvatar={handleEditAvatarClick}\r\n        onEditProfile={handleEditProfileClick}\r\n        onAddCard={handleAddCardClick}\r\n        onCardClick={handleCardClick}\r\n        cards={cards}\r\n        onCardLike={handleCardLike}\r\n        onConfirmDeletionPopupOpen={confirmDeletionPopupOpen}\r\n      />\r\n      <Footer />\r\n      <EditProfilePopup\r\n        isOpen={isEditProfilePopupOpen}\r\n        onClose={closeAllPopups}\r\n        onUpdateUser={handleUpdateUser}\r\n        isLoading={isLoading}\r\n      />\r\n      <EditAvatarPopup\r\n        isOpen={isEditAvatarPopupOpen}\r\n        onClose={closeAllPopups}\r\n        onUpdateAvatar={handleUpdateAvatar}\r\n        isLoading={isLoading}\r\n      />\r\n      <AddPlacePopup\r\n        isOpen={isAddCardPopupOpen}\r\n        onClose={closeAllPopups}\r\n        onAddPlace={handleAddPlaceSubmit}\r\n        isLoading={isLoading}\r\n      />\r\n      <ConfirmDeletionPopup\r\n        isOpen={isConfirmDeletionPopup}\r\n        onClose={closeAllPopups}\r\n        cardDelete={handleCardDelete}\r\n        isLoading={isLoading}\r\n      />\r\n      <ImagePopup\r\n        card={selectedCard}\r\n        onClose={closeAllPopups}\r\n      />\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}